# java-filmorate

Приложение, которое помогает выбрать фильм. Пользователи могут добавлять друг-друга в друзья, ставить фильмам лайки или
дизлайки, оставлять отзывы после просмотра. Также возможен поиск фильма по различным параметрам: по жанру, режиссёру,
популярности.

## Технологии

- Java 11
- Spring Boot
- JDBC
- Maven
- Lombok
- JUnit

## Фичи

### Фильмы

- Добавить фильм
- Обновить фильм
- Найти фильм по id
- Поставить лайк фильму
- Удалить лайк фильму
- Найти самые популярные фильмы
- Удалить фильм
- Выполнить поиск фильмов по совпадению заданного текста с названием или режиссёром
- Выполнить поиск фильмов по id режиссёра и остортировать по количеству лайков или году выхода фильма

### Пользователи

- Добавить пользователя
- Обновить пользователя
- Получить список всех пользователей
- Найти пользователя по id
- Добавить пользователя в друзья
- Удалить пользователя из друзей
- Найти друзей пользователя
- Найти общих друзей пользователя
- Удалить пользователя

### Жанры

- Получить список всех доступных жанров
- Найти жанр по id

### Возрастные рейтинги (MPA)

- Найти рейтинг по id
- Получить список всех возрастных рейтингов

### Отзывы на фильм

- Оставить отзыв
- Обновить отзыв
- Обновить отзыв
- Получить список отзывов о фильме
- Найти отзыв по id
- Поставить лайк отзыву
- Поставить дизлайк отзыву

### Режиссёры

- Получить список всех режиссёров
- Найти режиссёра по id
- Добавить режиссёра
- Обновить данные о режиссёре
- Добавить нового режиссёра
- Удалить режиссёра по id

## ER-диаграмма

![filmorate](https://user-images.githubusercontent.com/114815793/233120990-907ca13c-26ba-4127-86b9-fa67352b0fcc.png)

Пример запроса:
Получение топ-10 названий фильмов по количеству лайков:
```sql
SELECT name
FROM film
WHERE film_id IN (SELECT film_id
                  FROM like
                  GROUP BY film_id
                  ORDER BY COUNT(user_id) desc
                   LIMIT 10);
```
Получение id и логинов друзей по id пользователя = 1:
```sql 
SELECT u.login,
       u.user_id
FROM user AS u
WHERE u.user_id IN (SELECT f.user_second_id
                    FROM friendship AS f
                    WHERE f.user_first_id = 1);
```

Пир-ревью:
Отличная работа, молодец! 
Диаграмма выполнена в соответствии с поставленным ТЗ,
с учетом code style. 
Для наглядности можно было бы таблицу "like" назвать "film_like", 
что подчеркнуло бы принадлежность Лайка фильму. 
